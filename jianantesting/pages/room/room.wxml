<!--index.wxml-->
<view class="page">

  <!--内容主体-->
  <swiper class="swiper" current="{{currentTab}}" duration="200" bindchange="swiperChange">
    <swiper-item>
      <scroll-view class="weui-article swipscroll" scroll-y="true">
        <view class="weui-article__h1 tx">我的信息</view>
        <block>
          <view class="flex">
            <view class="usermotto">
              <text class="user-motto tx">{{gameinfo.name}}</text>
            </view>
            <view class="usermotto">
              <text class="user-motto">（房间码：{{tableid}}）</text>
            </view>
          </view>
          <view class="flex">
            <view class="usermotto">
              <text class="user-motto tx">{{characterinfo.charactername}}</text>
            </view>
            <view class="usermotto">
              <text class="user-motto">（{{characterinfo.charactersex}}）</text>
            </view>
          </view>
          <view class="usermotto" style="padding-top: 10rpx">
            <text class="user-motto" >{{characterinfo.characterdescription}}</text>
          </view>
          <view class="usermotto">
            <text class="user-motto">{{characterinfo.characterbackground}}</text>
          </view>
          <view class="usermotto" style="padding-top: 10rpx">
            <text class="user-motto tx" style="font-size: 30rpx">已知信息：</text>
          </view>
            <view wx:for="{{characterinfo.characterinfo}}">
            <text class="tx" style="font-size: 28rpx">*{{item.type}}</text>
              <view wx:for="{{item.content}}">
              <text style="font-size: 28rpx">  {{item}}</text>
              </view>
            </view>
          <view class="usermotto" style="padding-top: 10rpx">
            <text class="user-motto tx" style="font-size: 30rpx">肮脏的事实：</text>
          </view>
          <view wx:for="{{characterinfo.characterscandal}}">
            <text> => {{item}}</text>
          </view>
          <view class="usermotto" style="padding-top: 10rpx">
            <text class="user-motto tx" style="font-size: 28rpx">目的：</text>
          </view>
          <view wx:for="{{characterinfo.characterobjective}}">
            <text style="font-size: 28rpx">=> {{item}}</text>
          </view>
        </block>
      </scroll-view>
    </swiper-item>

    <swiper-item>
      <scroll-view class="weui-article swipscroll" scroll-y="true">
        <view class="weui-article__h1 tx">公开的线索</view>
        <block>
          <block wx:for="{{mainplot}}" wx:for-item="plot" wx:key="index">
          <block wx:for="{{plot.content}}" wx:for-item="item" wx:key="index">
            <view style="font-size: 30rpx; font-weight: bold; padding-top: 10rpx">*{{item.type}}</view>
            <view style="font-size: 28rpx;">{{item.content}}</view>
          </block>
          </block>
        </block>
      </scroll-view>
    </swiper-item>

    <swiper-item>
      <scroll-view class="weui-article swipscroll" scroll-y="true">
        <view class="weui-article__h1 tx">我的线索</view>
        <block>
          <block wx:for="{{acquiredclue}}" wx:for-item="clue" wx:key="index">
            <view style="font-size: 28rpx;">{{gameinfo.cluelocation[clue.cluelocation].name}} : {{clue.content}}</view>
            <image wx:if="{{clue.image}}" src="{{clue.image}}"></image>
          </block>
        </block>
      </scroll-view>
    </swiper-item>

    <swiper-item>
      <view wx:if="{{roundnumber>0}}" class="weui-article">
        <view class="weui-article__h1 tx">搜集线索</view>
        <image class="square" wx:if="{{gameinfo.mapurl}}" src="{{gameinfo.mapurl}}"></image>
        <view style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center;">
          <block wx:for="{{gameinfo.cluelocation}}" wx:for-item="location" wx:key="index">
            <button class="squareB" style="width: 40%;" bindtap='getclue' id='{{location.index}}'>{{location.name}}</button>
          </block>
        </view>
      </view>
    </swiper-item>

    <swiper-item>
      <scroll-view class="weui-article swipscroll" scroll-y="true">
        <view class="weui-article__h1 tx">游戏说明及背景</view>
        <block>
          <view class="usermotto">
            <text class="user-motto" style="font-weight: bold; font-size: 30rpx;">*{{gameinfo.name}}</text>
          </view>
          <view class="usermotto">
            <text class="user-motto" style="font-size: 28rpx;">{{gameinfo.descripion}}</text>
          </view>
        </block>
      </scroll-view>
    </swiper-item>

    <swiper-item>
      <view class="weui-article">
        <view class="weui-article__h1 tx">使用功能</view>
        <block>

          <view class="square">
            <form bindsubmit="bindFormSubmit">
              <textarea class="notepad" maxlength="400" bindblur="bindTextAreaBlur" placeholder="点击“公告秘密”将此处填写内容显示在下面的对话框中（所有玩家可见）" value="{{broadcast}}" name="textarea" />
              <button class="squareB" style="width: 100%;" form-type="submit"> 公告秘密 </button>
            </form>
          </view>
          <view class="square">
            <scroll-view class="notepad" scroll-y="true">
              <block wx:for="{{globalbroadcast}}">
                <view style="margin: 5rpx"> {{gameinfo.characterlist[item.characterid].name}} </view>
                <view> {{item.broadcast}} </view>
              </block>
            </scroll-view>
          </view>
          <view style="display: block;">
            <form bindsubmit="setactionpoint" hidden='{{hostname!=usernickname}}'>
              <slider value="3" activeColor="orange" min="0" max="10" show-value name="point" />
              <button class="squareB" form-type="submit"> 设置行动点 </button>
            </form>
            <button class="squareB" bindtap='nextround' hidden='{{hostname!=usernickname}}'>进入下一回合</button>
            <view class="flex">
              <button class="squareB" hidden='{{vote==-1?false:true}}' bindtap='vote'>指认凶手</button>
              <button class="squareB" hidden='{{vote==-1?true:false}}' bindtap='showresult'>查看投票</button>
              <button class="squareB" bindtap='save'>保存信息</button>
              <button class="squareB" bindtap='clearinfo'>退出房间</button>
            </view>
          </view>
        </block>
      </view>
    </swiper-item>
  </swiper>
  <!--底部导航栏-->
  <view class="swiper-tab">
    <view class="tab-item">
      <image class="tab-item {{currentTab==0 ? 'on' : ''}}" data-current="0" bindtap="navigate" id="1" style="width: 25px; height: 25px;" src="/icon/用户_填充.png"></image>
    </view>
    <view class="tab-item">
      <image class="tab-item {{currentTab==1 ? 'on' : ''}}" data-current="1" bindtap="navigate" id="2" style="width: 25px; height: 25px;" src="/icon/清单_填充.png"></image>
    </view>
    <view class="tab-item">
      <image class="tab-item {{currentTab==2 ? 'on' : ''}}" data-current="2" bindtap="navigate" id="3" style="width: 25px; height: 25px;" src="/icon/信封_填充.png"></image>
    </view>
    <view class="tab-item">
      <image class="tab-item {{currentTab==3 ? 'on' : ''}}" data-current="3" bindtap="navigate" id="4" style="width: 25px; height: 25px;" src="/icon/搜索_填充.png"></image>
    </view>
    <view class="tab-item">
      <image class="tab-item {{currentTab==4 ? 'on' : ''}}" data-current="4" bindtap="navigate" id="5" style="width: 25px; height: 25px;" src="/icon/问号_填充.png"></image>
    </view>
    <view class="tab-item">
      <image class="tab-item {{currentTab==5 ? 'on' : ''}}" data-current="5" bindtap="navigate" id="6" style="width: 25px; height: 25px;" src="/icon/设置_填充.png"></image>
    </view>
  </view>
</view>